<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Analysis Results | Applyce</title>
  <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>
  {% include 'components/navbar.html' %}

  <main class="section">
    <div class="container">
      <div class="section-header">
        <div>
          <p class="section-subtitle">Analysis Results</p>
          <h1 class="section-title">Your AI-powered career insights.</h1>
          <p class="helper-text">Explore your scores, career predictions, and actionable improvements.</p>
        </div>
        <div class="chip-list">
          <span class="badge">Grade A</span>
          <span class="badge-purple">AI Verified</span>
        </div>
      </div>

      <div class="grid" style="display:grid; gap:2rem; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); margin-top:2.5rem;">
        <div class="glass card" style="text-align:center;">
          <h3>Overall Score</h3>
          <div class="progress-ring" style="--value: {{ quality_score or 82 }}%; margin:1.5rem auto;">
            <span>{{ quality_score or 82 }}%</span>
          </div>
          <p class="helper-text">Resume & ATS combined score</p>
          <div class="chip-list" style="justify-content:center;">
            <span class="badge-success">Keywords</span>
            <span class="badge-warning">Format</span>
            <span class="badge">Sections</span>
            <span class="badge-purple">Content</span>
          </div>
        </div>
        <div class="glass card">
          <h3>Score Breakdown</h3>
          <div style="margin-top:1.5rem;">
            <p class="helper-text">Keywords</p>
            <div class="progress"><div class="progress-bar" style="width: 88%;"></div></div>
          </div>
          <div style="margin-top:1rem;">
            <p class="helper-text">Format</p>
            <div class="progress"><div class="progress-bar" style="width: 76%;"></div></div>
          </div>
          <div style="margin-top:1rem;">
            <p class="helper-text">Sections</p>
            <div class="progress"><div class="progress-bar" style="width: 81%;"></div></div>
          </div>
          <div style="margin-top:1rem;">
            <p class="helper-text">Content</p>
            <div class="progress"><div class="progress-bar" style="width: 92%;"></div></div>
          </div>
        </div>
        <div class="glass card">
          <h3>Grade</h3>
          <div style="margin-top:1.5rem; display:flex; align-items:center; gap:1rem;">
            <span class="badge-success" style="font-size:1.4rem;">A+</span>
            <div>
              <p class="helper-text">ATS Score</p>
              <h3>{{ ats_score or quality_score or 82 }}%</h3>
            </div>
          </div>
          <p class="helper-text" style="margin-top:1rem;">Consistent structure with strong keyword alignment.</p>
        </div>
      </div>

      <div class="section" style="padding-top:2.5rem;">
        <div class="glass card">
          <div class="section-header" style="margin-bottom:1.5rem;">
            <h2>Career Predictions</h2>
            <span class="badge">Top matches</span>
          </div>
          <div class="icon-grid">
            {% if mode == 'manual' %}
              {% for career in top_3_careers %}
              <div class="glass-soft card">
                <h4>{{ career.career }}</h4>
                <p class="helper-text">Confidence {{ career.confidence }}%</p>
                <div class="progress" style="margin-top:0.75rem;">
                  <div class="progress-bar" style="width: {{ career.confidence }}%;"></div>
                </div>
                <a class="btn btn-secondary" href="{{ url_for('show_roadmap', career=career.career) }}">View Roadmap</a>
              </div>
              {% endfor %}
            {% else %}
              {% for career, confidence in predicted_career.top_careers[:3] %}
              <div class="glass-soft card">
                <h4>{{ career }}</h4>
                <p class="helper-text">Confidence {{ confidence }}%</p>
                <div class="progress" style="margin-top:0.75rem;">
                  <div class="progress-bar" style="width: {{ confidence }}%;"></div>
                </div>
                <a class="btn btn-secondary" href="{{ url_for('show_roadmap', career=career) }}">View Roadmap</a>
              </div>
              {% endfor %}
            {% endif %}
          </div>
        </div>
      </div>

      <div class="section" style="padding-top:2.5rem;">
        <div class="grid" style="display:grid; gap:2rem; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
          <div class="glass card">
            <h2>Your Skills</h2>
            <div class="chip-list" style="margin-top:1.5rem;">
              {% if technical_skills %}
                {% for skill in technical_skills.split(',')[:10] %}
                <span class="tag tag-green">{{ skill.strip() }}</span>
                {% endfor %}
              {% else %}
                <span class="tag tag-green">Product strategy</span>
                <span class="tag tag-green">Market analysis</span>
                <span class="tag tag-green">Stakeholder alignment</span>
              {% endif %}
            </div>
          </div>
          <div class="glass card">
            <h2>Skills to Learn</h2>
            <div class="chip-list" style="margin-top:1.5rem;">
              {% if skill_gaps %}
                {% for skill in skill_gaps[:10] %}
                <span class="tag tag-orange">{{ skill }}</span>
                {% endfor %}
              {% else %}
                <span class="tag tag-orange">AI experimentation</span>
                <span class="tag tag-orange">Leadership coaching</span>
                <span class="tag tag-orange">Data storytelling</span>
              {% endif %}
            </div>
          </div>
        </div>
      </div>

      <div class="section" style="padding-top:2.5rem;">
        <div class="grid" style="display:grid; gap:2rem; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
          <div class="glass card">
            <h2>ATS Report Preview</h2>
            <p class="helper-text">Snapshot of your ATS readiness with critical issues flagged.</p>
            <div class="glass-soft card" style="margin-top:1.5rem;">
              <p><i class="fas fa-exclamation-circle" style="color:var(--warning);"></i> Missing 6 role-specific keywords</p>
              <p><i class="fas fa-check-circle" style="color:var(--success);"></i> Clear section hierarchy</p>
              <p><i class="fas fa-exclamation-circle" style="color:var(--warning);"></i> Add quantifiable metrics to 3 bullets</p>
            </div>
            <a class="btn btn-secondary" href="/ats-report" style="margin-top:1.5rem;">View Full Report</a>
          </div>
          <div class="glass card">
            <h2>Recommendations</h2>
            <div class="icon-grid" style="margin-top:1.5rem;">
              {% if improvements %}
                {% for item in improvements[:3] %}
                <div class="glass-soft card">
                  <h4>{{ item.title or 'Resume Enhancement' }}</h4>
                  <p class="helper-text">{{ item.description or item }}</p>
                  <span class="badge">Impact +{{ item.impact or 8 }}%</span>
                </div>
                {% endfor %}
              {% else %}
                <div class="glass-soft card">
                  <h4>Highlight measurable impact</h4>
                  <p class="helper-text">Add metrics to showcase results for recent projects.</p>
                  <span class="badge">Impact +12%</span>
                </div>
                <div class="glass-soft card">
                  <h4>Strengthen leadership signals</h4>
                  <p class="helper-text">Include cross-functional leadership achievements.</p>
                  <span class="badge">Impact +9%</span>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>

      <div class="section" style="padding-top:2.5rem;">
        <div class="glass card" style="display:flex; flex-wrap:wrap; gap:1rem; justify-content:space-between; align-items:center;">
          <div>
            <h2>Take action</h2>
            <p class="helper-text">Download your report or jump into curated job searches.</p>
          </div>
          <div style="display:flex; gap:1rem; flex-wrap:wrap;">
            <a class="btn btn-primary" href="#">Download Report</a>
            <a class="btn btn-secondary" href="/jobs">Search Jobs</a>
            <a class="btn btn-outline" href="{{ url_for('guide') }}">View Roadmap</a>
          </div>
        </div>
      </div>
    </div>
  </main>

  {% include 'components/footer.html' %}
</body>
</html>
